# Safety Configuration
# Level-1 Safe Implementation - Maximum Safety Guardrails

# Core Safety Principles
safety_level: 1  # Level 1 = Maximum safety, human approval for everything

# Human Approval Requirements
human_approval:
  required: true
  
  # Operations that ALWAYS require approval
  always_require_approval:
    - publish_content
    - create_marketplace_listing
    - configure_payment
    - send_email
    - post_social_media
    - spend_money
    - modify_payment_settings
    - create_external_account
    - grant_api_access
  
  # Operations that can be automated (safe)
  can_automate:
    - generate_local_files
    - create_proposals
    - anonymize_data
    - run_analysis
    - generate_reports
    - package_files

# Financial Safety
financial:
  auto_spend: false  # NEVER auto-spend
  max_daily_spend: 0  # Zero auto-spending allowed
  require_approval_over: 0  # Require approval for ANY spend
  
  payment_actions:
    stripe_charge: forbidden
    paypal_send: forbidden
    crypto_transaction: forbidden
    subscription_charge: forbidden
  
  allowed_actions:
    generate_invoice: true  # Can generate invoices for review
    create_payment_link: true  # Can create links for manual use
    calculate_pricing: true  # Can calculate recommended prices

# Content Publishing Safety
publishing:
  auto_publish: false  # NEVER auto-publish
  
  platforms:
    dev_to: manual_only
    medium: manual_only
    hashnode: manual_only
    youtube: manual_only
    twitter: manual_only
    linkedin: manual_only
    reddit: manual_only
  
  approval_workflow:
    1_generate: automated
    2_review: human_required
    3_edit: human_required
    4_approve: human_required
    5_publish: human_required

# Data Privacy & Anonymization
data_privacy:
  anonymization: required
  
  # Always anonymize these fields
  anonymize_always:
    - email_addresses
    - full_names
    - ip_addresses
    - payment_info
    - api_keys
    - secrets
    - phone_numbers
    - physical_addresses
  
  # Fuzzing rules
  fuzzing:
    timestamps: nearest_hour  # Fuzz timestamps to nearest hour
    locations: city_level_only  # Only keep city, remove street address
    user_ids: hash_with_salt  # Hash user IDs with random salt
  
  # Data retention
  retention:
    raw_data: never_keep  # Never keep raw, non-anonymized data
    anonymized_data: 2_years
    audit_logs: 1_year
  
  # GDPR compliance
  gdpr:
    enabled: true
    right_to_deletion: true
    data_portability: true
    consent_required: true

# API & External Access Safety
api_access:
  rate_limiting:
    enabled: true
    max_requests_per_hour: 100
    max_requests_per_day: 1000
  
  authentication:
    require_api_key: true
    rotate_keys_days: 90
  
  allowed_domains:
    - github.com
    - api.github.com
  
  forbidden_actions:
    - modify_repository
    - delete_content
    - create_pull_request  # Level-1: even this needs approval
    - close_issue
    - merge_pr

# Monitoring & Audit
monitoring:
  audit_logging:
    enabled: true
    log_all_operations: true
    log_file: revenue_farm/audit.log
    retention_days: 365
  
  alert_on:
    - attempted_auto_publish
    - attempted_payment
    - api_rate_limit_approaching
    - unauthorized_access_attempt
    - data_anonymization_failure
    - configuration_change
  
  daily_report:
    enabled: true
    include:
      - operations_attempted
      - proposals_generated
      - errors_encountered
      - safety_violations_blocked

# Content Quality Thresholds
quality:
  minimum_quality_score: 0.8  # 0-1 scale
  
  checks:
    - grammar_check
    - plagiarism_check
    - technical_accuracy
    - brand_consistency
  
  reject_if:
    - quality_score < 0.8
    - plagiarism_detected
    - contains_secrets
    - missing_attribution

# Ethical Guardrails
ethics:
  transparency:
    ai_generated_label: required
    disclosure_statement: required
    sources_cited: required
  
  prohibited_content:
    - misleading_claims
    - unverified_facts
    - competitor_attacks
    - spam
    - manipulative_tactics
  
  responsible_ai:
    bias_check: enabled
    fairness_review: enabled
    harm_prevention: enabled

# Emergency Controls
emergency:
  kill_switch:
    enabled: true
    command: python revenue_farm/orchestrator.py --emergency-stop
  
  rollback:
    enabled: true
    keep_backups: 7_days
  
  circuit_breaker:
    error_threshold: 5  # Stop after 5 consecutive errors
    cooldown_minutes: 60

# Compliance Requirements
compliance:
  required_disclosures:
    - AI-generated content must be labeled
    - Affiliate relationships must be disclosed
    - Data collection must have consent
    - Pricing must be transparent
  
  regular_audits:
    frequency: weekly
    automated: true
    report_location: revenue_farm/compliance_reports/

# Rate Limits (Conservative)
rate_limits:
  proposals_per_day: 10
  api_calls_per_hour: 100
  content_generation_per_day: 5
  data_exports_per_week: 2

# Failure Modes
failure_handling:
  on_error: stop_and_alert
  retry_attempts: 0  # Don't retry automatically
  rollback_on_failure: true
  preserve_logs: true

# Notification Channels
notifications:
  channels:
    console: true
    log_file: true
    email: false  # Configure when ready
    slack: false  # Configure when ready
  
  severity_levels:
    info: log_only
    warning: log_and_console
    error: log_console_and_stop
    critical: emergency_stop

# Version & Update Settings
version_control:
  config_version: "1.0.0"
  last_updated: "2026-02-14"
  auto_update_configs: false  # Require manual config updates
  backup_before_change: true

# Safety Checklist (Must be completed before Level-2)
safety_checklist:
  financial_sandbox: false
  data_anonymization_verified: false
  approval_workflow_tested: false
  kill_switch_verified: false
  audit_logging_working: false
  auto_publish_disabled: true
  auto_spend_disabled: true
  api_keys_secured: false
  gdpr_compliant: false
  ethics_reviewed: false
